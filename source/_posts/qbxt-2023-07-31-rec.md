---
title: QBXT 2023.7.31 模拟赛 做题记录
date: 2023-07-31 15:21:04
categories: 做题记录
tags:
  - 动态规划
  - 图论
---

100 + 95 + 30 + 80．

怎么只能过 shaber 题啊？/qd

怎么全场只有我被卡常？/qd

ckain AK 了，拜谢 ckain．

<!-- more -->

## A. 链条

把节点权值变成 $a_u \oplus a_f$，然后就用一个 DP 弄一下权值最大和次大的链就行．

## B. 奇迹之地

$n \le 5 \times 10^4$，一眼 bitset．

设 $f_{u, v}$ 表示 $u$ 到 $v$ 的路径条数 $\bmod\ 2$，容易使用 bitset 优化转移．

## C. 星树

这下要 learn how to use binary search 了．/qd

考虑二分答案，转化为判定是否存在合法方案使得根节点答案 $\ge$ 一个值．

这样那个排列的限制就没用了，设当前判定的值为 $x$，我们直接将权值 $\ge x$ 的点看作 $1$，剩下的点看作 $0$．

设 $f_{u}$ 表示在 $u$ 的子树中分配至少多少个 $1$ 才能使得 $u$ 为 $1$．设 $u$ 的儿子个数为 $v$，由于题面中的策略是取中位数，转移直接枚举 $f_v$ 前 $\lceil 1 / 2 \rceil$ 大的 $v$，求和即可．

## D. 千叶树．

$f_i = 1$ 的部分分是容易的，由于根节点必须单独被分到一个集合，其他的节点可以任意分，答案就是 ${n - 1 \brack m - 1}$．

$n, m \le 100$ 的部分分也是容易的，设 $f_{u, i}$ 表示将 $u$ 的子树内划分成 $i$ 个互不区分的集合的方案数，转移考虑合并一个子树，枚举两部分分别有划分出了多少个集合，然后再将多出来的集合合并．比正解难写．/qd

考虑按照 bfs 序分配集合，这样在考虑一个点时，其祖先都被考虑过了，有转移 $f_{i + 1, j} \leftarrow f_{i, j - 1} + (j - \mathrm{dep}_{i + 1}) f_{i, j}$．
