---
title: 信友队 2023.10.4 模拟赛 做题记录
date: 2023-10-04 19:23:17
categories: 做题记录
---

75 + 40 + 30 + 20．

<!-- more -->

## A. 巴士路线

有一个显然的倍增优化建边的做法．很可惜，空间寄了．

考虑先用若干根从 $1$ 开始的巴士路线进行类似 bfs 的过程，但是只搜没有搜过的点．

由于第一次覆盖到某个点一定是换乘次数最少的方案，正确性显然．

## B. 拍照

$q \le 100$，只需考虑如何线性求到达顺序确定后的丑陋值和．

设 $t_i$ 为编号为 $i$ 的人到达的时间，显然能和 $i$ 造成贡献的人只能是贡献了 $[1, i - 1]$ 这个前缀中的某些后缀最小值的位置．

用一个单调栈维护，弹栈时顺便统计一下贡献．

## C. 情报破译

由于是位运算，位与位之间独立，考虑拆位．

设 $f_{k, i, j, 0 / 1}$ 表示从 $a$ 的第 $i$ 位，操作序列的第 $j$ 位开始往后操作 $2^k$ 轮后，$0 / 1$ 会变成什么．转移直接拼接前后两部分即可．细节有点多．

多带了个 $\log$ 跑不大动，发现这个拆位可以通过位运算优化掉．具体地，将状态重新设为一个全 $0 / 1$ 数会变成什么，这样也可以通过位运算 $O(1)$ 转移，去掉拆位的 $\log$．

## D. ⼩镇做题家

设集合 $S_i$ 表示课程 $i$ 包含的学生集合．

若 $S_i \cap S_j \not= \varnothing$，连边 $i \to j$，边权为 $S_j - |S_i \cap S_j|$．

这个图上 $i$，$j$ 间的最短路的含义是某题从课程 $i$ 传递到课程 $j$ 需要被多少人看到．

那么对于点对 $(x, y)$，答案就是

$$
\min_{x \in S_i, y \in S_j} |S_i| + \operatorname{dist}(i, j)
$$

预处理学生到所有课程的最短路即可 $O(n^3)$ 完成．
