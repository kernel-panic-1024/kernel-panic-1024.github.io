---
title: 24OI 2023.8.18 模拟赛 做题记录
date: 2023-08-18 15:25:38
categories: 做题记录
---

100 + 65 + 30 + 60．

<!-- more -->

## 坏蛋信使

签到题，场上只过了两个人，怎么会是呢．

场上我狂暴找规律过了这题．首先可以猜测答案的分母一定是 $n^m$，然后打了个 $5 \times 5$ 的表，发现序列长度相同时不同交换次数的答案的分母可以递推．具体而言，设交换 $i$ 次时答案的分子为 $a_i$，有 $a_i = (a_{i - 1} + n^{i - 1}) \times (n - 2) + n^i$．直接矩阵快速幂糊上去．

直接推也很好推！这里贺一下 ckain．

由期望的线性，可以对每个位置分开计算贡献．

每个位置的地位对等．

对于每个位置，考虑进行 $m$ 次操作后仍在该位置的信封仍在原位置的概率．

设 $F_i$ 表示 $i$ 操作后仍在原位置的概率，有递推式：
$$
F_i = \left(\frac{n^2 - (2n - 1)}{n^2} + \frac{1}{n^2} \right) F_{i - 1} + \frac{2}{n^2}(1 - F_{i - 1})
$$

可以求出通项．也可以矩阵快速幂求解．

## 路由器

原．但是写挂了．

## 进化

$\Huge\color{red}{\text{没写代码．}}$

考虑辗转相减的过程，每个数对的祖先链是确定的．那么就相当于询问某个串是字符串集合里中的多少个串的前缀．

这个辗转相减的过程有一车重复的操作，于是压缩一下串，然后塞一起排序就行了．

## 青蛙

$6$ 维偏序，狗都不补．
